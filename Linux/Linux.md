# Linux

- 리눅스(Linux)는 리누스 토발즈가 커뮤니티 주체로 유닉스(UNIX) 운영체제를 기반으로 만들어진 컴퓨터 운영체제입니다.
- 리눅스(Linux)는 유닉스(UNIX)와 마찬가지로 다중 사용자, 다중 작업(멀티태스킹), 다중 스레드를 지원하는 네트워크 운영 체제(NOS)입니다. 현재는 상당수의 웹 서버와 모바일 장치(안드로이드 등)를 구동하는 운영체제로도 많이 이용이 되고 있습니다.
  - LINUX (Linux is Not Unix) : '리눅스는 유닉스가 아니다'의 약자
  - NOS (Network Operation System) : 사람이 컴퓨터를 사용할 수 있도록 하는 프로그램 중 하나

## Linux 를 사용하는 이유

1. 모든 소스가 오픈되어 있어 광범위하게 사용된다.
2. 다중사용자, 다중작업을 지원하기 때문에 시스템적으로 서버를 운영하기에 적합하다.
3. 리눅스는 무료이며 개발 환경이 풍부하다.

## 가상머신

- 하드웨어를 소프트웨어적으로 구현해서 그 위에서 운영체제가 작동하도록하는 기술이다.

### 가상머신을 사용하는 이유

1. 다른 운영체제를 사용해야 하는 경우(Windows에서 Linux)
2. 독립된 작업공간이 필요한 경우(바이러스 회피, 백업)

### VirtualBox

- 오라클에서 만든 가상머신 솔루션이다. 오픈소스이며 무료이다.

## Linux 명령어

### 디렉토리와 파일

- 현재 경로 보기

```bash
$ pwd
```

- 해당 디렉토리 이동하기

```bash
$ cd {인자값}
      cd . : 현재 디렉토리로 이동
      cd .. : 상위 디렉토리로 이동
      cd ~ : 홈 디렉토리로 이동
      cd - : 이전 작업 디렉토리로 이동
```

- 파일 내역 출력

```bash
$ ls {옵션} {디렉토리/파일}
        -a: 모든 파일과 디렉토리 표시
        -l: 자세히 출력
```

- 파일, 디렉토리 복사

```bash
$ cp {옵션} {복사파일} {복사위치}
        -f: 강제로 복사
        -r: 하위 경로 포함하여 복사
        -v: 복사 진행 상황 출력
```

- 디렉토리 생성

```bash
$ mkdir {옵션} {이름}
        -m: 디렉토리 생성 시 기본 권한 설정
        -p: 상위 디렉토리 생성
        --help: 도움말
```

- 파일, 디렉토리 이동

```bash
$ mv {옵션} {이동소스} {이동타겟}
        -f: 강제로 이동
        -v: 이동 진행 상태 출력
```

- 파일, 디렉토리 삭제

```bash
$ rm {옵션} {디렉토리/파일}
        -f: 강제삭제
        -r: 디렉토리 삭제 시 하위 경로와 파일 삭제
        -v: 파일 삭제 정보를 자세히 보여줌
```

- 텍스트 파일 내용 출력

```bash
$ cat {옵션} {파일 이름}
        >: 내용 덮어 씌우기
        >>: 기존 파일 내용 추가
```

- 비어있는 파일 생성

```bash
$ touch {파일이름}
```

- 파일 내용 중 처음부터 10줄 출력

```bash
$ head {파일이름}
```

- 파일 내용중 마지막부터 10줄 출력

```bash
$ tail {파일이름}
```

- chown(change the owner of a file) 파일의 소유권을 바꾸기 위해 사용

```bash
$ chown {옵션} {변경할유저이름:변경할그룹이름} {파일이름}
        -R : 하위 디렉토리에도 모든 권한 변경
    - chown {변경할유저이름} – 소유자만 변경
    - chown {:변경할그룹이름} – 그룹만 변경
    - chown {변경할유저이름:} – 소유자와 그룹 모두 동일한걸로 변경
    - chown {변경할유저이름:변경할그룹이름} – 소유자와 그룹을 서로 다른걸로 변경
```

<img src="https://user-images.githubusercontent.com/48443734/71878313-ad302a80-316e-11ea-95bb-b588dcc5ba66.PNG" />

> 빨간색 선 기준으로 왼쪽은 소유자, 오른쪽은 그룹

- 파일의 권한을 변경
- 8진수 형태와 심볼릭 형태로 사용 가능
- 심볼릭이 기능적인 면으론 좋지만 조금 복잡
- 쉽게 쓸려면 8진수 형태

```bash
$ chmod {옵션} {8진수Permission} {파일명} – 8진수 형태
$ chmod {옵션} {대상}{+/-/=}{rwx} {파일명} – 심볼릭 형태
        -R : 하위 디렉토리에도 모든 권한 변경
        -c : 권한 변경 파일내용을 출력
```

<img src="https://user-images.githubusercontent.com/48443734/71878246-7e19b900-316e-11ea-9046-7167cbb3fbbe.PNG" />

```text
d는 디렉토리, -는 파일
3칸 기준으로

첫번째는 owner
두번째는 group
세번째는 other
```

```text
chmod 명령어 8진수

8진수 0~7은 아래와 같이 2진수로 표현이 가능
0 : 000
1 : 001
2 : 010
3 : 011
4 : 100
5 : 101
6 : 110
7 : 111

위 2진수 세자리는 rwx 세자리와 일치하며 2진수가 1이면 해당 권한을 부여, 0이면 해당 권한을 제거
```

```text
chmod 명령어 심볼릭

- 대상
u : user의 권한
g : group의 권한
o : other의 권한
a : 모든 사용자 권한

- +/-/=
+ : 해당 권한을 추가
– : 해당 권한을 제거
= : 해당 권한을 설정한데로 변경

- rwx
r : 읽기 권한
w : 쓰기 권한
x : 실행 권한
```

### 파일 찾기

- 파일명검색

```bash
# 파일 명에 'test'가 들어간 파일 검색
$ find -name '*test'
```

- 파일 형식

```bash
# f : 일반파일, d : 디렉토리
# 디렉토리이면서 이름중에 git이 들어간 것을 검색
$ find -type d -name '*git'
```

- 파일의 소유자

```bash
# 소유자가 root인 파일 검색
$ find -user root
```

- 텍스트 검색 기능을 가짐

```bash
$ grep {검색어} {파일이름}
```

### 프로세스

- ps(process status) 시스템에서 현재 수행되고 있는 프로세스를 확인

```bash
$ ps aux
```

- 프로세스를 종료

```bash
$ kill {SIGNAL} {프로세스명}
$ kill -9 {프로세스명}   # 응답없어도 강제종료
$ kill -15 {프로세스명}  # 일반적 종료
```

- 시스템의 운용사항을 실시간으로 모니터링할 수 있는 유틸리티로, 윈도우의 작업관리자를 연상하면 된다. CPU, 메모리, 프로세스등을 확인할 수 있다.

```bash
$ top
```

- 데몬 실행 및 종료

```bash
$ sudo service {데몬이름} start # 데몬 실행
$ sudo service {데몬이름} stop # 데몬 중지
$ sudo service {데몬이름} restart # 데몬 재시작
```

### SSH(원격제어)

- SSH server 설치

```bash
# server
$ sudo apt-get install openssh-server
# client
$ sudo apt-get install openssh-client
```

- SSH server 실행

```bash
$ sudo service ssh start
```

- client 컴퓨터로 server 컴퓨터 원격제어하기

```bash
$ ssh {서버사용자이름}@{ip address}
```

- rsa라는 암호화 방식으로 키를 생성

```bash
$ ssh-keygen -t rsa
```

- 키를 확인

```bash
$ ls -al ~/.ssh/
```

| 파일            | 설명                                                                         |
| --------------- | ---------------------------------------------------------------------------- |
| id_rsa          | private key, 절대로 타인에게 노출되면 안된다.                                |
| id_rsa.pub      | public key, 접속하려는 리모트 머신의 authorized_keys에 입력한다.             |
| authorized_keys | 리모트 머신의 .ssh 디렉토리 아래에 위치하면서 id_rsa.pub 키의 값을 저장한다. |
